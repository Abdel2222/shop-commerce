define(['ko','jquery','uiComponent','Magento_Customer/js/customer-data'],function(ko,$,Component,customerData){'use strict';return Component.extend({initialize:function(){this._super();if(this.isHomePage){var navLang=navigator.language||navigator.userLanguage;var userLang=navLang.substr(0,2);var cookieLang=$.cookieStorage.get('mage-locale');var langStores=Object.keys(this.stores);var redirect=this.getUrlParameter('redirect');if(redirect){if(redirect!==$.cookieStorage.get('mage-locale')){cookieLang=$.cookieStorage.set('mage-locale',redirect);}}else if(cookieLang&&(cookieLang!==this.currentStore)){window.location.replace(this.getRedirectUrl(cookieLang));}
if(!cookieLang&&userLang!==this.currentStore&&(langStores.indexOf(userLang)!==-1)){window.location.replace(this.getRedirectUrl(userLang));}}},getUrlParameter:function(sParam){var sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split('&'),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split('=');if(sParameterName[0]===sParam){return sParameterName[1]===undefined?true:sParameterName[1];}}},getRedirectUrl:function(lang){var url="";switch(lang){case"fr":url=this.stores.fr;break;case"nl":url=this.stores.nl;break;default:url=this.stores.fr;}
return url;}})});